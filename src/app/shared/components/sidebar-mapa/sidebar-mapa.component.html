<div class="sidebar-mapa">
  <p-sidebar
    [(visible)]="visibilidadeSidebar"
    position="right"
    [dismissible]="true"
    (onHide)="closeSidebar()"
    [blockScroll]="true"
  >
    <div class="ponto-detalhes" *ngIf="pontoSelecionado || getMonitorData()">
      <h4 class="ponto-titulo">
        {{ getMonitorData()?.addressLocationName | sliceString: 50 }}
      </h4>

      <div class="street-view-container">
        <img
          *ngIf="
            getMonitorData()?.photoUrl ||
            (!loadingImage && !imageError && streetViewUrl)
          "
          [src]="getMonitorData()?.photoUrl || streetViewUrl"
          alt="Street View"
          class="street-view-image"
          (error)="handleImageError()"
        />
      </div>

      <div class="ponto-info">
        <div
          *ngIf="getMonitorData()?.addressLocationDescription"
          class="info-grupo"
        >
          <div class="align-self-center">üìç</div>
          <div class="info-detalhe">
            <span class="info-label">Description</span>
            <span class="info-valor">
              {{
                getMonitorData().addressLocationDescription | sliceString: 100
              }}</span
            >
          </div>
        </div>

        <div
          *ngIf="
            pontoSelecionado.locationDescription ||
            getMonitorData()?.locationDescription
          "
          class="info-grupo"
        >
          <app-icon-tv-display
            width="18"
            height="18"
            fill="var(--cor-primaria)"
          ></app-icon-tv-display>
          <div class="info-detalhe">
            <span class="info-label">Screen location on site</span>
            <span class="info-valor">{{
              getMonitorData()?.locationDescription ||
                pontoSelecionado.locationDescription
            }}</span>
          </div>
        </div>

        <div *ngIf="pontoSelecionado.type" class="info-grupo">
          <app-icon-tv-display
            width="18"
            height="18"
            fill="var(--cor-primaria)"
            class="align-self-center"
          ></app-icon-tv-display>
          <div class="info-detalhe">
            <span class="info-label">Display</span>
            <span class="info-valor">{{
              getMonitorData()?.size + '" ' + "Onsite Digital Screen"
            }}</span>
          </div>
        </div>

        <!-- Campos espec√≠ficos do monitor -->
        <div *ngIf="getMonitorData()" class="monitor-details">
          <div class="info-grupo">
            <app-icon-bolt
              *ngIf="getMonitorData()?.active"
              width="18"
              height="18"
              fill="var(--cor-sucesso)"
              class="align-self-center"
            ></app-icon-bolt>
            <app-icon-close
              *ngIf="!getMonitorData()?.active"
              width="18"
              height="18"
              fill="var(--cor-erro)"
              class="align-self-center"
            ></app-icon-close>
            <div class="info-detalhe">
              <span class="info-label">Status</span>
              <span
                class="info-valor"
                [class.text-success]="getMonitorData()?.active"
                [class.text-danger]="!getMonitorData()?.active"
              >
                {{ getMonitorData()?.active ? "Active" : "Inactive" }}
              </span>
            </div>
          </div>

          <div
            *ngIf="getMonitorData()?.hasAvailableSlots !== undefined"
            class="info-grupo"
          >
            <app-icon-check
              *ngIf="getMonitorData()?.hasAvailableSlots"
              width="18"
              height="18"
              fill="var(--cor-sucesso)"
              class="align-self-center"
            ></app-icon-check>
            <app-icon-warning
              *ngIf="!getMonitorData()?.hasAvailableSlots"
              width="18"
              height="18"
              fill="#ffc107"
              class="align-self-center"
            ></app-icon-warning>
            <div class="info-detalhe">
              <span class="info-label">Available</span>
              <span
                class="info-valor"
                [class.text-success]="getMonitorData()?.hasAvailableSlots"
                [class.text-warning]="!getMonitorData()?.hasAvailableSlots"
              >
                {{ getMonitorData()?.hasAvailableSlots ? "Yes" : "No" }}
              </span>
            </div>
          </div>

          <div
            *ngIf="
              getMonitorData()?.adsDailyDisplayTimeInMinutes !== undefined &&
              getMonitorData()?.adsDailyDisplayTimeInMinutes > 0
            "
            class="info-grupo"
          >
            <app-icon-bolt
              width="18"
              height="18"
              fill="var(--cor-sucesso)"
              class="align-self-center"
            ></app-icon-bolt>
            <div class="info-detalhe">
              <span class="info-label">Daily Ad views</span>
              <span class="info-valor"
                >{{
                  getMonitorData()?.adsDailyDisplayTimeInMinutes
                }}
                minutes</span
              >
            </div>
          </div>

          <div
            *ngIf="getMonitorData()?.estimatedSlotReleaseDate"
            class="info-grupo"
          >
            <app-icon-clock
              width="18"
              height="18"
              fill="var(--cor-primaria)"
              class="align-self-center"
            ></app-icon-clock>
            <div class="info-detalhe">
              <span class="info-label">Next Available</span>
              <span class="info-valor">{{
                getMonitorData()?.estimatedSlotReleaseDate | date: "MM/dd/yyyy"
              }}</span>
            </div>
          </div>
        </div>
      </div>

      <div class="acoes-container">
        <button
          pButton
          label="Wish list"
          icon="pi pi-heart-fill"
          class="p-button p-button-secondary"
          (click)="addToWishlist()"
        ></button>
        <button
          pButton
          label="Add Screen"
          icon="pi pi-plus"
          class="p-button"
          (click)="addToList()"
        ></button>
      </div>
    </div>

    <div class="sem-ponto" *ngIf="!pontoSelecionado">
      <p>No point selected.</p>
    </div>
  </p-sidebar>
</div>
