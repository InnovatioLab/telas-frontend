<div class="admin-alert-sidebar" [ngClass]="{'visible': isVisible, 'pinned': isPinned}">
  <div class="sidebar-header">
      <div class="header-actions">
      <button class="pin-btn desktop-only" (click)="togglePin($event)" [ngClass]="{'pinned': isPinned}"
        aria-label="Pin/Unpin sidebar" pTooltip="{{isPinned ? 'Unpin sidebar' : 'Pin sidebar'}}" tooltipPosition="left">
        <app-icon-lock *ngIf="isPinned"></app-icon-lock>
        <app-icon-lock-open *ngIf="!isPinned"></app-icon-lock-open>
      </button>

      <button *ngIf="!isPinned" class="close-btn" (click)="toggleSidebar()" aria-label="Close sidebar"
        pTooltip="Close" tooltipPosition="left">
        <app-icon-close></app-icon-close>
      </button>
    </div>

    <h2 class="text-center">Monitoring Alerts</h2>
    <p class="text-center">Welcome, {{ userName }}</p>
  </div>
  
  <div class="sidebar-content">
    <div class="search-container">
      <div class="address-search-container">
        <div class="address-search-input">
          <input
            type="text"
            pInputText
            [(ngModel)]="searchTerm"
            (ngModelChange)="applyFilters()"
            placeholder="Search alerts..."
            maxlength="50"
            class="search-input"
          />
          <button
            type="button"
            class="botao-pesquisa"
            (click)="applyFilters()"
            aria-label="Search"
            pTooltip="Search alerts"
            tooltipPosition="left"
          >
            <app-icon-search class="search-icon"></app-icon-search>
          </button>
        </div>
      </div>
    </div>    
    <div class="filter-container">
      <p-selectButton 
        [options]="filterOptions" 
        [(ngModel)]="statusFilter" 
        (onChange)="applyFilters()" 
        styleClass="full-width-select">
      </p-selectButton>
    </div>
    
    <div class="alerts-container">
      <h3>System Alerts</h3>
      
      <div *ngIf="isLoading" class="loading-container">
        <p-progressSpinner strokeWidth="4" [style]="{width: '50px', height: '50px'}"></p-progressSpinner>
        <p>Loading alerts...</p>
      </div>
      
      <div *ngIf="!isLoading && filteredAlerts.length === 0" class="no-alerts">
        <p>No alerts found.</p>
      </div>
      
      <app-card-alert 
        *ngFor="let alert of filteredAlerts" 
        [alert]="alert"
        (resolve)="resolveAlert($event)"
        (acknowledge)="acknowledgeAlert($event)">
      </app-card-alert>
    </div>
  </div>
</div>

<div class="admin-overlay" *ngIf="isVisible && !isPinned" (click)="closeOverlay()"></div>
