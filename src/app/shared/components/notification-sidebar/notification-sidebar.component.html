<p-sidebar
  [(visible)]="visible"
  (onHide)="closeSidebar()"
  position="right"
  styleClass="notification-sidebar"
>
  <ng-template pTemplate="header">
    <h3 class="sidebar-title">Notificações</h3>
  </ng-template>

  <ng-template pTemplate="content">
    @if (notificationsService.visibleNotifications().length > 0) {
      <div class="notification-list">
        @for (notification of notificationsService.visibleNotifications(); track notification.id) {
          <div class="notification-item" (click)="markAsRead(notification)" [class.visualized]="notification.visualized">
            <div class="notification-icon">
              <i class="pi pi-info-circle"></i>
            </div>
            <div class="notification-content">
              <p class="notification-title">{{ notification.reference }}</p>
              <p class="notification-message">{{ notification.message }}</p>
            </div>
          </div>
        }
      </div>
    } @else {
      <div class="empty-state flex flex-column align-items-center justify-content-center gap-3 p-5">
        <app-icon-notifications [size]="48"></app-icon-notifications>
        <div class="text-center">
          <div class="empty-title">Você não tem notificações</div>
          <div class="empty-subtitle">Quando houver novidades, avisaremos aqui.</div>
        </div>
      </div>
    }
  </ng-template>

  <ng-template pTemplate="footer">
    @if (notificationsService.hasMoreToLoad()) {
      <p-button
        label="Carregar Mais"
        (click)="loadMore()"
        styleClass="p-button-secondary p-button-sm w-full">
      </p-button>
    }
  </ng-template>
</p-sidebar>
