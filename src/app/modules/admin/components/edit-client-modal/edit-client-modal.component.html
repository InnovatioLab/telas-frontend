<div class="edit-client-modal w-full">
  <form [formGroup]="editForm" (ngSubmit)="onSubmit()">
    <div class="form-content">
      <div class="form-section">
        <h4>Business Information</h4>
        <div class="form-row">
          <div class="form-field">
            <label for="businessName" class="required">Business Name</label>
            <input
              pInputText
              type="text"
              maxlength="255"
              id="businessName"
              formControlName="businessName"
              placeholder="Enter business name"
            />
            <app-error
              id="error-msg-business-name"
              [control]="editForm.get('businessName')"
            ></app-error>
          </div>
          <div class="form-field">
            <label for="identificationNumber" class="required"
              >Identification Number</label
            >
            <p-inputMask
              id="identificationNumber"
              mask="999999999"
              autoClear="false"
              formControlName="identificationNumber"
              [disabled]="true"
            />
            <app-error
              id="error-msg-identification-number"
              [control]="editForm.get('identificationNumber')"
            ></app-error>
          </div>
        </div>
        <div class="form-row">
          <div class="form-field">
            <label for="industry" class="required">Industry</label>
            <input
              pInputText
              type="text"
              id="industry"
              formControlName="industry"
              uiTextOnly
              placeholder="Enter industry"
            />
            <app-error
              id="error-msg-industry"
              [control]="editForm.get('industry')"
            ></app-error>
          </div>
          <div class="form-field">
            <label for="websiteUrl">Website URL</label>
            <input
              pInputText
              type="text"
              id="websiteUrl"
              formControlName="websiteUrl"
              placeholder="Enter website URL"
            />
            <app-error
              id="error-msg-website"
              [control]="editForm.get('websiteUrl')"
            ></app-error>
          </div>
        </div>
      </div>

      <div class="form-section">
        <h4>Contact Information</h4>
        <div class="form-row">
          <div class="form-field">
            <label for="contactEmail" class="required">Email</label>
            <input
              type="email"
              pInputText
              formControlName="contactEmail"
              class="w-full input-form"
              id="inp-email"
              maxLength="255"
              placeholder="Enter contact email"
            />
            <app-error
              id="error-msg-email"
              [control]="editForm.get('contactEmail')"
            ></app-error>
          </div>
          <div class="form-field">
            <label for="contactPhone" class="required">Phone</label>
            <p-inputMask
              id="contactPhone"
              mask="+1 999 999 9999"
              class="w-full"
              formControlName="contactPhone"
              placeholder="Enter contact phone"
            />
            <app-error
              id="error-msg-phone"
              [control]="editForm.get('contactPhone')"
            ></app-error>
          </div>
        </div>
      </div>

      <div class="form-section">
        <h4>Owner Information</h4>
        <div class="form-row">
          <div class="form-field">
            <label
              id="lb-owner-identification-number"
              for="owner-identification-number"
              class="required"
              >Identification Number</label
            >
            <p-inputMask
              mask="999999999"
              autoClear="false"
              formControlName="ownerIdentificationNumber"
              class="w-full input-form"
              id="owner-identification-number"
              [disabled]="true"
            />
          </div>
          <div class="form-field">
            <label for="ownerFirstName" class="required">First Name</label>
            <input
              pInputText
              id="ownerFirstName"
              type="text"
              formControlName="ownerFirstName"
              placeholder="Enter first name"
              maxlength="50"
              uiTextOnly
            />
            <app-error
              id="error-msg-owner-first-name"
              [control]="editForm.get('ownerFirstName')"
            ></app-error>
          </div>
          <div class="form-field">
            <label for="ownerLastName">Last Name</label>
            <input
              id="ownerLastName"
              type="text"
              pInputText
              formControlName="ownerLastName"
              placeholder="Enter last name"
              uiTextOnly
              maxlength="150"
            />
            <app-error
              id="error-msg-owner-last-name"
              [control]="editForm.get('ownerLastName')"
            ></app-error>
          </div>
        </div>
        <div class="form-row">
          <div class="form-field">
            <label for="ownerEmail" class="required">Email</label>
            <input
              id="ownerEmail"
              type="email"
              pInputText
              formControlName="ownerEmail"
              placeholder="Enter email"
              maxLength="255"
            />
            <app-error
              id="error-msg-owner-email"
              [control]="editForm.get('ownerEmail')"
            ></app-error>
          </div>
          <div class="form-field">
            <label for="ownerPhone" class="required">Phone</label>
            <p-inputMask
              id="ownerPhone"
              mask="+1 999 999 9999"
              class="w-full"
              formControlName="ownerPhone"
              placeholder="Enter phone number"
            />
            <app-error
              id="error-msg-owner-email"
              [control]="editForm.get('ownerPhone')"
            ></app-error>
          </div>
        </div>
      </div>

      <div class="form-section">
        <h4>Status</h4>
        <div class="form-row status-row">
          <div class="form-field full-width">
            <label for="status">Status</label>
            <p-dropdown
              id="status"
              [options]="statusOptions"
              formControlName="status"
              placeholder="Select status"
              optionLabel="label"
              optionValue="value"
              [style.max-width.px]="150"
            >
            </p-dropdown>
          </div>
        </div>
      </div>

      <div class="form-section">
        <h4>Addresses</h4>
        <div formArrayName="addresses">
          <div
            class="address-item"
            *ngFor="
              let addressGroup of addressesFormArray.controls;
              let i = index
            "
            [formGroupName]="i"
          >
            <div class="address-header">
              <h5>Address {{ i + 1 }}</h5>
              <button
                type="button"
                class="remove-address-btn"
                (click)="removeAddress(i)"
                *ngIf="addressesFormArray.length > 1"
              >
                <app-icon-close></app-icon-close>
              </button>
            </div>
            <div class="form-row">
              <div class="form-field">
                <label htmlFor="street" class="required">Street</label>
                <input
                  type="text"
                  pInputText
                  formControlName="street"
                  placeholder="Enter street"
                  maxlength="100"
                  id="inp-street"
                />
                <app-error
                  *ngIf="
                    addressGroup.get('street')?.touched &&
                    addressGroup.get('street')?.invalid
                  "
                  id="error-msg-street"
                  [control]="addressGroup.get('street')"
                ></app-error>
              </div>
              <div class="form-field">
                <label htmlFor="zipCode" class="required">ZipCode</label>
                <p-inputMask
                  mask="99999"
                  formControlName="zipCode"
                  id="inp-zip-code"
                  placeholder="Enter ZIP code"
                  (onComplete)="
                    onZipCodeChange(
                      getAddressGroup(i),
                      getAddressGroup(i).get('zipCode')?.value
                    )
                  "
                ></p-inputMask>
                <app-error
                  *ngIf="
                    addressGroup.get('zipCode')?.touched &&
                    addressGroup.get('zipCode')?.invalid
                  "
                  id="error-msg-zip-code"
                  [control]="addressGroup.get('zipCode')"
                ></app-error>
              </div>
            </div>
            <div class="form-row">
              <div class="form-field">
                <label htmlFor="city" id="lb-city" class="required">City</label>
                <input
                  type="text"
                  id="inp-city"
                  pInputText
                  formControlName="city"
                  placeholder="Enter city"
                  maxlength="50"
                />
                <app-error
                  *ngIf="
                    addressGroup.get('city')?.touched &&
                    addressGroup.get('city')?.invalid
                  "
                  id="error-msg-city"
                  [control]="addressGroup.get('city')"
                ></app-error>
              </div>
              <div class="form-field">
                <label htmlFor="state" id="lb-state" class="required"
                  >State</label
                >
                <input
                  type="text"
                  pInputText
                  formControlName="state"
                  placeholder="Enter state"
                  minlength="2"
                  maxlength="2"
                  uiTextOnly
                  id="inp-state"
                />
                <app-error
                  *ngIf="
                    addressGroup.get('state')?.touched &&
                    addressGroup.get('state')?.invalid
                  "
                  [control]="addressGroup.get('state')"
                ></app-error>
              </div>
            </div>
            <div class="form-row">
              <div class="form-field">
                <label htmlFor="country" id="lb-country">Country</label>
                <input
                  type="text"
                  pInputText
                  formControlName="country"
                  placeholder="Enter country"
                  maxlength="100"
                  uiTextOnly
                  id="inp-country"
                />
                <app-error
                  *ngIf="
                    addressGroup.get('country')?.touched &&
                    addressGroup.get('country')?.invalid
                  "
                  id="error-msg-country"
                  [control]="addressGroup.get('country')"
                ></app-error>
              </div>
              <div class="form-field">
                <label>Complement</label>
                <input
                  type="text"
                  pInputText
                  formControlName="complement"
                  placeholder="Enter complement"
                  maxlength="100"
                  id="inp-complement"
                />
                <app-error
                  *ngIf="
                    addressGroup.get('complement')?.touched &&
                    addressGroup.get('complement')?.invalid
                  "
                  id="error-msg-complement"
                  [control]="addressGroup.get('complement')"
                ></app-error>
              </div>
            </div>
          </div>
          <div class="add-address-btn">
            <button
              type="button"
              class="p-button p-button-secondary p-button-outlined"
              (click)="addAddress()"
            >
              <app-icon-upload></app-icon-upload>
              <span>Add Address</span>
            </button>
          </div>
        </div>
      </div>
    </div>

    <div class="form-actions">
      <button
        pButton
        id="btnSecundario"
        type="button"
        class="p-button p-button-secondary p-button-outlined"
        (click)="onCancel()"
      >
        <app-icon-close></app-icon-close>
        <span>Cancel</span>
      </button>
      <button
        pButton
        type="submit"
        class="p-button-rounded"
        [disabled]="editForm.invalid || loading"
        [class.p-button-loading]="loading"
      >
        <app-icon-check></app-icon-check>
        <span>Save</span>
      </button>
    </div>
  </form>
</div>
