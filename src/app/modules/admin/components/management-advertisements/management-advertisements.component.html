<div class="management-advertisements-container">
  <div class="section-header">
    <h1 class="titulo">Advertisements Management</h1>
    <p class="subtitulo">Manage and review all advertisements in the system</p>
  </div>

  <div class="filters">
    <div class="p-input-icon-left">
      <i class="pi pi-search"></i>
      <input 
        pInputText 
        type="text" 
        [(ngModel)]="searchTerm"
        (keyup.enter)="onSearch()"
        placeholder="Search advertisements..." />
    </div>
    <button pButton pRipple 
            label="Search" 
            icon="pi pi-search" 
            (click)="onSearch()"
            [loading]="loading">
    </button>
  </div>

  <div class="content">
    <p-table 
      [value]="advertisements" 
      [loading]="loading"
      [paginator]="true"
      [rows]="pageSize"
      [totalRecords]="totalRecords"
      [showCurrentPageReport]="true"
      currentPageReportTemplate="Showing {first} to {last} of {totalRecords} advertisements"
      [rowsPerPageOptions]="[10, 25, 50]"
      (onLazyLoad)="onPageChange($event)"
      styleClass="p-datatable-sm">
      
      <ng-template pTemplate="header">
        <tr>
          <th>ID</th>
          <th>Link</th>
          <th>Status</th>
          <th>Submission Date</th>
          <th>Waiting Days</th>
          <th>Actions</th>
        </tr>
      </ng-template>
      
      <ng-template pTemplate="body" let-ad>
        <tr>
          <td>{{ad.id?.substring(0, 8) || 'N/A'}}</td>
          <td>
            <a [href]="ad.link" target="_blank" class="ad-link">
              {{ad.link || 'No link'}}
            </a>
          </td>
          <td>
            <p-badge 
              [value]="getStatusLabel(ad.validation)" 
              [severity]="getStatusSeverity(ad.validation)">
            </p-badge>
          </td>
          <td>{{ad.submissionDate | date:'short'}}</td>
          <td>{{ad.waitingDays || 0}} days</td>
          <td>
            <div class="action-buttons">
              <button pButton pRipple 
                      icon="pi pi-check" 
                      class="p-button-rounded p-button-success p-button-text" 
                      (click)="approveAdvertisement(ad)"
                      pTooltip="Approve Advertisement"
                      [disabled]="ad.validation?.toLowerCase() === 'approved'">
              </button>
              <button pButton pRipple 
                      icon="pi pi-times" 
                      class="p-button-rounded p-button-warning p-button-text" 
                      (click)="rejectAdvertisement(ad)"
                      pTooltip="Reject Advertisement"
                      [disabled]="ad.validation?.toLowerCase() === 'rejected'">
              </button>
              <button pButton pRipple 
                      icon="pi pi-trash" 
                      class="p-button-rounded p-button-danger p-button-text" 
                      (click)="deleteAdvertisement(ad)"
                      pTooltip="Delete Advertisement">
              </button>
            </div>
          </td>
        </tr>
      </ng-template>
      
      <ng-template pTemplate="emptymessage">
        <tr>
          <td colspan="6" class="text-center">No advertisements found.</td>
        </tr>
      </ng-template>
    </p-table>
  </div>
</div> 